import struct

# _RAYMAN_CRC_thing = BytesIO(bytes.fromhex('00 00 00 00 B7 1D C1 04 6E 3B 82 09 D9 26 43 0D DC 76 04 13 6B 6B C5 17 B2 4D 86 1A 05 50 47 1E B8 ED 08 26 0F F0 C9 22 D6 D6 8A 2F 61 CB 4B 2B 64 9B 0C 35 D3 86 CD 31 0A A0 8E 3C BD BD 4F 38 70 DB 11 4C C7 C6 D0 48 1E E0 93 45 A9 FD 52 41 AC AD 15 5F 1B B0 D4 5B C2 96 97 56 75 8B 56 52 C8 36 19 6A 7F 2B D8 6E A6 0D 9B 63 11 10 5A 67 14 40 1D 79 A3 5D DC 7D 7A 7B 9F 70 CD 66 5E 74 E0 B6 23 98 57 AB E2 9C 8E 8D A1 91 39 90 60 95 3C C0 27 8B 8B DD E6 8F 52 FB A5 82 E5 E6 64 86 58 5B 2B BE EF 46 EA BA 36 60 A9 B7 81 7D 68 B3 84 2D 2F AD 33 30 EE A9 EA 16 AD A4 5D 0B 6C A0 90 6D 32 D4 27 70 F3 D0 FE 56 B0 DD 49 4B 71 D9 4C 1B 36 C7 FB 06 F7 C3 22 20 B4 CE 95 3D 75 CA 28 80 3A F2 9F 9D FB F6 46 BB B8 FB F1 A6 79 FF F4 F6 3E E1 43 EB FF E5 9A CD BC E8 2D D0 7D EC 77 70 86 34 C0 6D 47 30 19 4B 04 3D AE 56 C5 39 AB 06 82 27 1C 1B 43 23 C5 3D 00 2E 72 20 C1 2A CF 9D 8E 12 78 80 4F 16 A1 A6 0C 1B 16 BB CD 1F 13 EB 8A 01 A4 F6 4B 05 7D D0 08 08 CA CD C9 0C 07 AB 97 78 B0 B6 56 7C 69 90 15 71 DE 8D D4 75 DB DD 93 6B 6C C0 52 6F B5 E6 11 62 02 FB D0 66 BF 46 9F 5E 08 5B 5E 5A D1 7D 1D 57 66 60 DC 53 63 30 9B 4D D4 2D 5A 49 0D 0B 19 44 BA 16 D8 40 97 C6 A5 AC 20 DB 64 A8 F9 FD 27 A5 4E E0 E6 A1 4B B0 A1 BF FC AD 60 BB 25 8B 23 B6 92 96 E2 B2 2F 2B AD 8A 98 36 6C 8E 41 10 2F 83 F6 0D EE 87 F3 5D A9 99 44 40 68 9D 9D 66 2B 90 2A 7B EA 94 E7 1D B4 E0 50 00 75 E4 89 26 36 E9 3E 3B F7 ED 3B 6B B0 F3 8C 76 71 F7 55 50 32 FA E2 4D F3 FE 5F F0 BC C6 E8 ED 7D C2 31 CB 3E CF 86 D6 FF CB 83 86 B8 D5 34 9B 79 D1 ED BD 3A DC 5A A0 FB D8 EE E0 0C 69 59 FD CD 6D 80 DB 8E 60 37 C6 4F 64 32 96 08 7A 85 8B C9 7E 5C AD 8A 73 EB B0 4B 77 56 0D 04 4F E1 10 C5 4B 38 36 86 46 8F 2B 47 42 8A 7B 00 5C 3D 66 C1 58 E4 40 82 55 53 5D 43 51 9E 3B 1D 25 29 26 DC 21 F0 00 9F 2C 47 1D 5E 28 42 4D 19 36 F5 50 D8 32 2C 76 9B 3F 9B 6B 5A 3B 26 D6 15 03 91 CB D4 07 48 ED 97 0A FF F0 56 0E FA A0 11 10 4D BD D0 14 94 9B 93 19 23 86 52 1D 0E 56 2F F1 B9 4B EE F5 60 6D AD F8 D7 70 6C FC D2 20 2B E2 65 3D EA E6 BC 1B A9 EB 0B 06 68 EF B6 BB 27 D7 01 A6 E6 D3 D8 80 A5 DE 6F 9D 64 DA 6A CD 23 C4 DD D0 E2 C0 04 F6 A1 CD B3 EB 60 C9 7E 8D 3E BD C9 90 FF B9 10 B6 BC B4 A7 AB 7D B0 A2 FB 3A AE 15 E6 FB AA CC C0 B8 A7 7B DD 79 A3 C6 60 36 9B 71 7D F7 9F A8 5B B4 92 1F 46 75 96 1A 16 32 88 AD 0B F3 8C 74 2D B0 81 C3 30 71 85 99 90 8A 5D 2E 8D 4B 59 F7 AB 08 54 40 B6 C9 50 45 E6 8E 4E F2 FB 4F 4A 2B DD 0C 47 9C C0 CD 43 21 7D 82 7B 96 60 43 7F 4F 46 00 72 F8 5B C1 76 FD 0B 86 68 4A 16 47 6C 93 30 04 61 24 2D C5 65 E9 4B 9B 11 5E 56 5A 15 87 70 19 18 30 6D D8 1C 35 3D 9F 02 82 20 5E 06 5B 06 1D 0B EC 1B DC 0F 51 A6 93 37 E6 BB 52 33 3F 9D 11 3E 88 80 D0 3A 8D D0 97 24 3A CD 56 20 E3 EB 15 2D 54 F6 D4 29 79 26 A9 C5 CE 3B 68 C1 17 1D 2B CC A0 00 EA C8 A5 50 AD D6 12 4D 6C D2 CB 6B 2F DF 7C 76 EE DB C1 CB A1 E3 76 D6 60 E7 AF F0 23 EA 18 ED E2 EE 1D BD A5 F0 AA A0 64 F4 73 86 27 F9 C4 9B E6 FD 09 FD B8 89 BE E0 79 8D 67 C6 3A 80 D0 DB FB 84 D5 8B BC 9A 62 96 7D 9E BB B0 3E 93 0C AD FF 97 B1 10 B0 AF 06 0D 71 AB DF 2B 32 A6 68 36 F3 A2 6D 66 B4 BC DA 7B 75 B8 03 5D 36 B5 B4 40 F7 B1'))
# a = tuple(struct.unpack('<I',_RAYMAN_CRC_thing.read(4))[0] for _ in range(256))

_CONSTANTS = (0, 79764919, 159529838, 222504665, 319059676, 398814059, 445009330, 507990021, 638119352, 583659535, 797628118, 726387553, 890018660, 835552979, 1015980042, 944750013, 1276238704, 1221641927, 1167319070, 1095957929, 1595256236, 1540665371, 1452775106, 1381403509, 1780037320, 1859660671, 1671105958, 1733955601, 2031960084, 2111593891, 1889500026, 1952343757, 2552477408, 2632100695, 2443283854, 2506133561, 2334638140, 2414271883, 2191915858, 2254759653, 3190512472, 3135915759, 3081330742, 3009969537, 2905550212, 2850959411, 2762807018, 2691435357, 3560074640, 3505614887, 3719321342, 3648080713, 3342211916, 3287746299, 3467911202, 3396681109, 4063920168, 4143685023, 4223187782, 4286162673, 3779000052, 3858754371, 3904687514, 3967668269, 881225847, 809987520, 1023691545, 969234094, 662832811, 591600412, 771767749, 717299826, 311336399, 374308984, 453813921, 533576470, 25881363, 88864420, 134795389, 214552010, 2023205639, 2086057648, 1897238633, 1976864222, 1804852699, 1867694188, 1645340341, 1724971778, 1587496639, 1516133128, 1461550545, 1406951526, 1302016099, 1230646740, 1142491917, 1087903418, 2896545431, 2825181984, 2770861561, 2716262478, 3215044683, 3143675388, 3055782693, 3001194130, 2326604591, 2389456536, 2200899649, 2280525302, 2578013683, 2640855108, 2418763421, 2498394922, 3769900519, 3832873040, 3912640137, 3992402750, 4088425275, 4151408268, 4197601365, 4277358050, 3334271071, 3263032808, 3476998961, 3422541446, 3585640067, 3514407732, 3694837229, 3640369242, 1762451694, 1842216281, 1619975040, 1682949687, 2047383090, 2127137669, 1938468188, 2001449195, 1325665622, 1271206113, 1183200824, 1111960463, 1543535498, 1489069629, 1434599652, 1363369299, 622672798, 568075817, 748617968, 677256519, 907627842, 853037301, 1067152940, 995781531, 51762726, 131386257, 177728840, 240578815, 269590778, 349224269, 429104020, 491947555, 4046411278, 4126034873, 4172115296, 4234965207, 3794477266, 3874110821, 3953728444, 4016571915, 3609705398, 3555108353, 3735388376, 3664026991, 3290680682, 3236090077, 3449943556, 3378572211, 3174993278, 3120533705, 3032266256, 2961025959, 2923101090, 2868635157, 2813903052, 2742672763, 2604032198, 2683796849, 2461293480, 2524268063, 2284983834, 2364738477, 2175806836, 2238787779, 1569362073, 1498123566, 1409854455, 1355396672, 1317987909, 1246755826, 1192025387, 1137557660, 2072149281, 2135122070, 1912620623, 1992383480, 1753615357, 1816598090, 1627664531, 1707420964, 295390185, 358241886, 404320391, 483945776, 43990325, 106832002, 186451547, 266083308, 932423249, 861060070, 1041341759, 986742920, 613929101, 542559546, 756411363, 701822548, 3316196985, 3244833742, 3425377559, 3370778784, 3601682597, 3530312978, 3744426955, 3689838204, 3819031489, 3881883254, 3928223919, 4007849240, 4037393693, 4100235434, 4180117107, 4259748804, 2310601993, 2373574846, 2151335527, 2231098320, 2596047829, 2659030626, 2470359227, 2550115596, 2947551409, 2876312838, 2788305887, 2733848168, 3165939309, 3094707162, 3040238851, 2985771188)

def custom_crc(data: bytes) -> int:
    the_checksum = 0
    if len(data) > 0:
        the_checksum = 0xFFFFFFFF
        for x in data:
            the_checksum = (the_checksum << 8 ^ _CONSTANTS[(x ^ the_checksum >> 0x18) & 0xFFFFFFFF]) & 0xFFFFFFFF
        the_checksum = (~the_checksum) & 0xFFFFFFFF
    return the_checksum


# with open('savefile','rb+') as f:
    # aaa = struct.pack('<I',checksum(f.read(0x1A740)))
    # f.seek(0x1A744)
    # f.write(aaa)